{% extends "base.html" %}
{% load event_extras %}

{% block content %}
<div class="toolbar">
    <h2 style="margin:0;">{{ month_name }} {{ year }}</h2>
    {% if can_edit %}
        <a class="btn" href="{% url 'event_create' %}">➕ Создать мероприятие</a>
    {% endif %}
</div>

<table class="calendar">
    <tr>
        <th>Пн</th>
        <th>Вт</th>
        <th>Ср</th>
        <th>Чт</th>
        <th>Пт</th>
        <th>Сб</th>
        <th>Вс</th>
    </tr>

    {% for week in month_days %}
    <tr>
        {% for day in week %}
        <td class="{% if day.month != month %}other-month{% endif %}">
            <div class="day-number">{{ day.day }}</div>

            {% for event in events_by_day|get_item:day %}
                <div class="event status-{{ event.status }}">
                    <a href="{% url 'event_detail' event.id %}">
                        {{ event.name }}
                    </a>
                </div>
            {% endfor %}
        </td>
        {% endfor %}
    </tr>
    {% endfor %}
</table>
{% endblock %}

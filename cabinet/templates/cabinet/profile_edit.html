{% extends "base.html" %}

{% block content %}
<h1>Редактирование профиля</h1>

<div style="margin-bottom: 12px;">
  <div><strong>Роль:</strong> {{ role_name|default:"—" }}</div>
  <div style="font-size: 12px; opacity: 0.8;">
    Роль меняется администратором/менеджером. Здесь её изменить нельзя.
  </div>
</div>

<form method="post" enctype="multipart/form-data">
  {% csrf_token %}

  {% if user_form.non_field_errors or profile_form.non_field_errors %}
    <div style="padding:10px; border:1px solid #d33; margin-bottom:12px;">
      {{ user_form.non_field_errors }}
      {{ profile_form.non_field_errors }}
    </div>
  {% endif %}

  <h3 style="margin-top:18px;">Аккаунт</h3>
  <div class="form-row">
    <label>Username</label>
    {{ user_form.username }}
    {{ user_form.username.errors }}
  </div>
  <div class="form-row">
    <label>Имя</label>
    {{ user_form.first_name }}
    {{ user_form.first_name.errors }}
  </div>
  <div class="form-row">
    <label>Фамилия</label>
    {{ user_form.last_name }}
    {{ user_form.last_name.errors }}
  </div>
  <div class="form-row">
  <label>Отчество</label>
  {{ user_form.patronymic }}
  {{ user_form.patronymic.errors }}
  </div>
  <div class="form-row">
    <label>Email</label>
    {{ user_form.email }}
    {{ user_form.email.errors }}
  </div>
  <div class="form-row">
    <label>Телефон</label>
    {{ user_form.phone }}
    {{ user_form.phone.errors }}
  </div>

  <h3 style="margin-top:18px;">Анкета</h3>

  {% for f in profile_form %}
    <div class="form-row">
      <label>{{ f.label }}</label>
      {{ f }}
      {% if f.help_text %}<div style="font-size:12px; opacity:.75;">{{ f.help_text }}</div>{% endif %}
      {{ f.errors }}
    </div>
  {% endfor %}

  <div style="margin-top:16px;">
    <button class="btn" type="submit">Сохранить</button>
    <a class="btn-secondary" href="{% url 'cabinet:dashboard' %}">Отмена</a>
  </div>
</form>
{% endblock %}
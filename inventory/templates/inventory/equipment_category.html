{% extends "base.html" %}

{% block content %}
<div class="toolbar">
    <h2 style="margin:0;">Категория: {{ category.name }}</h2>
    <div>
        <a class="btn" href="{% url 'equipment_list' %}">← Категории</a>
        <a class="btn" href="{% url 'equipment_list_all' %}">Весь список</a>
    </div>
</div>

<form method="get" style="margin: 12px 0;">
    <label>С:
        <input type="datetime-local" name="start" value="{{ start }}">
    </label>
    <label style="margin-left:8px;">По:
        <input type="datetime-local" name="end" value="{{ end }}">
    </label>
    <button class="btn" type="submit" style="margin-left:8px;">Показать</button>
</form>

<table class="list-table">
    <thead>
        <tr>
            <th>Оборудование</th>
            <th>Всего</th>
            {% if has_period %}<th>Свободно на период</th>{% endif %}
        </tr>
    </thead>
    <tbody>
        {% for row in rows %}
        <tr>
            <td><a href="{% url 'equipment_detail' row.equipment.id %}">{{ row.equipment.name }}</a></td>
            <td>{{ row.equipment.quantity_total }}</td>
            {% if has_period %}
                <td>{{ row.free }}</td>
            {% endif %}
        </tr>
        {% empty %}
        <tr>
            <td colspan="{% if has_period %}3{% else %}2{% endif %}">В этой категории нет оборудования</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
